

## Fix Order Numbers, Silent Printing, and Clean Errors

### Issues Found

1. **Order number shows random/wrong**: After payment, the receipt is built from local state with `order_number: null` (line 577 in POS.tsx). The real order number (e.g., INB2602001) is generated by a database trigger, so the receipt falls back to showing a random UUID slice. When you re-enter the page, it loads the real order number from the database -- hence the mismatch.

2. **Browser print dialog appears**: When the local print daemon is unavailable, the code falls back to `handlePrint()` (browser print dialog). This needs to be changed so it either prints silently or skips printing entirely.

3. **Console ref warning**: `ReceiptDialog` is a function component without `forwardRef`, but the Dialog component tries to pass a ref to it.

4. **Orders view uses old `finalizePayment`**: `handleProcessOrderPayment` (line 678) still uses the old `finalizePayment` RPC instead of the faster `quickPayOrder`.

### Fixes

#### 1. Fetch real order number after payment (POS.tsx)

After `quickPayOrder` succeeds, make one quick fetch to get the real `order_number` from the database, then set it on the local receipt. This adds ~100ms but ensures the correct order number appears on screen and in the printed receipt.

```text
Before:  order_number: null  -->  shows "A3F2B1C8"
After:   order_number fetched  -->  shows "INB2602015"
```

This applies to both `handleProcessPayment` and `handleProcessOrderPayment`.

#### 2. Skip browser print dialog (ReceiptDialog.tsx)

Change the auto-print fallback: instead of calling `handlePrint()` (which triggers the browser dialog), simply log that no local printer is available and do nothing. The manual "Print Receipt" button remains available for users who want to print via browser.

#### 3. Fix ReceiptDialog ref warning (ReceiptDialog.tsx)

Wrap `ReceiptDialog` with `React.forwardRef` or restructure so the Dialog doesn't try to ref a plain function component.

#### 4. Use quickPayOrder in Orders view (POS.tsx)

Replace `finalizePayment` call in `handleProcessOrderPayment` with `quickPayOrder` for consistency and speed.

### Files Changed

| File | Changes |
|------|---------|
| `src/pages/POS.tsx` | Fetch real order_number after payment; use quickPayOrder in Orders view payment |
| `src/components/ReceiptDialog.tsx` | Remove browser print fallback; fix forwardRef warning |

